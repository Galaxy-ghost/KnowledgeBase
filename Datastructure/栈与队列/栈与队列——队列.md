## 队列结构

### 定义

- 队列是一种特殊的线性表，特殊之处就在于它只允许在表的前端进行删除操作，在表的后端进行插入操作
- 和栈一样，队列也是一种操作收到限制的线性表。进行插入操作端称之为队尾，进行删除操作端称之为队头
- 队列中没有队列的时候，称之为空队列。队列的数据元素，又叫做队列元素。在队列中插入一个队列元素称之为入队，在队列中删除一个队列元素称之为出队
- 因为队列只允许在一端插入，在另一端删除，所以只有最早进入的队列元素才可以从队列中删除，故队列又称为先进先出线性表

***

### 为什么要有队列

用于快速处理的设备（程序）和慢速设备（程序）之间的中转站

***

### 顺序存储的设计和实现

#### 设计

```c++
int data[5];
int front;  // 队头
int rear;   // 队尾

// 入队
data[rear] = e;
rear++;

// 出队
*e = data[front];
front++;
```

***

#### 问题

假溢出

在模拟队列的实现的时候可以发现存在假溢出的问题（当前面入队的元素出队时，无法再使用前面的内存入队，数组申请的空间无法存满）

这时候使用循环队列的结构来解决

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301142108741.png)

```c++
rear = (rear + 1) % 5;    // 入队
front = (front + 1) % 5;  // 出队
```

队满队空的判定条件重合

使用循环队列解决假溢出问题后发现队满和对空的都满足`front == rear`

**解决方法：**

空余一个空间不用（代码中使用的方法）

```c++
// 满
front == (rear + 1) % max;
// 空
front == rear;
```

结构体中增加一个标志位

***

#### 实现

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301151510251.png)

 

### 链式存储的设计和实现

#### 设计

```c++
// 入队
rear->next = node;
rear = node;
// 出队
tmp = front;
front = tmp->next;
free(tmp);
```

***

#### 实现

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301151510005.png)

***

##  队列的其他形式

### 双端队列

- 两端都是结尾的队列，队列的每一端都可以插入数据和移除数据
- 这种定义，是方便一个结构实现栈和队列

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301161923136.png)

***

### LRU最近最少使用

- LRU最近最少使用算法，根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”

***

### 延迟队列

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301161939358.png)

#### 常用场景

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301161948206.png)

- 数据库是在硬盘上的数据，访问硬盘的数据的速度要比直接访问内存中的数据要慢的多

***

### 阻塞队列

![img](https://shinax.oss-cn-hangzhou.aliyuncs.com/202301161957377.png)